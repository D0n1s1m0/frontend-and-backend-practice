<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Товары - Каталог</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .product-card {
            transition: all 0.3s ease;
            height: 100%;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .product-image {
            height: 200px;
            object-fit: cover;
        }
        .discount-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 2;
        }
        .price-old {
            text-decoration: line-through;
            color: #6c757d;
            font-size: 0.9em;
        }
        .price-new {
            color: #dc3545;
            font-weight: bold;
            font-size: 1.1em;
        }
        .cart-btn {
            transition: all 0.3s ease;
        }
        .cart-btn:hover {
            transform: scale(1.05);
        }
        .selected-product {
            border: 2px solid #198754 !important;
            box-shadow: 0 0 15px rgba(25, 135, 84, 0.3) !important;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container-fluid p-0">
        <!-- Header -->
        <header class="bg-primary text-white py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col">
                        <h1 class="h3 mb-1">Каталог товаров</h1>
                        <p class="mb-0 opacity-75">Лучшие товары по доступным ценам</p>
                    </div>
                    <div class="col-auto">
                        <span class="badge bg-light text-primary" id="cartCount">Корзина: 0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="../index.html">
                                <i class="bi bi-house me-1"></i>Главная
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="news.html">
                                <i class="bi bi-newspaper me-1"></i>Новости
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="practices.html">
                                <i class="bi bi-code-slash me-1"></i>Практики
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="goods.html">
                                <i class="bi bi-cart me-1"></i>Товары
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contacts.html">
                                <i class="bi bi-telephone me-1"></i>Контакты
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="container my-4">
            <!-- Filter Section -->
            <section class="mb-4">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="row g-3 align-items-center">
                            <div class="col-md-4">
                                <label for="categoryFilter" class="form-label">Категория:</label>
                                <select class="form-select" id="categoryFilter">
                                    <option value="all">Все категории</option>
                                    <option value="laptop">Ноутбуки</option>
                                    <option value="phone">Смартфоны</option>
                                    <option value="headphones">Наушники</option>
                                    <option value="tablet">Планшеты</option>
                                    <option value="monitor">Мониторы</option>
                                    <option value="keyboard">Клавиатуры</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="priceFilter" class="form-label">Цена:</label>
                                <select class="form-select" id="priceFilter">
                                    <option value="all">Любая цена</option>
                                    <option value="0-10000">До 10 000 руб.</option>
                                    <option value="10000-30000">10 000 - 30 000 руб.</option>
                                    <option value="30000-50000">30 000 - 50 000 руб.</option>
                                    <option value="50000+">От 50 000 руб.</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="sortFilter" class="form-label">Сортировка:</label>
                                <select class="form-select" id="sortFilter">
                                    <option value="name">По названию</option>
                                    <option value="price-low">Сначала дешевые</option>
                                    <option value="price-high">Сначала дорогие</option>
                                    <option value="popular">По популярности</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Grid -->
            <section>
                <div class="row g-4" id="productsGrid">
                    <!-- Product 1 -->
                    <div class="col-xl-4 col-md-6" data-category="laptop" data-price="75000">
                        <div class="card product-card">
                            <img src="../images/goods1.jpg" class="card-img-top product-image" alt="Ноутбук игровой">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Ноутбук игровой</h5>
                                <p class="card-text text-muted small">Мощный игровой ноутбук с процессором Intel Core i7 и видеокартой RTX 4060</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="h5 text-primary mb-0">75 000 руб.</span>
                                        <span class="badge bg-success">В наличии</span>
                                    </div>
                                    <button class="btn btn-primary w-100 cart-btn" onclick="addToCart(this, 1)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product 2 -->
                    <div class="col-xl-4 col-md-6" data-category="phone" data-price="35000">
                        <div class="card product-card">
                            <img src="../images/goods2.jpg" class="card-img-top product-image" alt="Смартфон премиум">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Смартфон премиум</h5>
                                <p class="card-text text-muted small">Флагманский смартфон с камерой 108 МП и экраном AMOLED 120 Гц</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="h5 text-primary mb-0">35 000 руб.</span>
                                        <span class="badge bg-success">В наличии</span>
                                    </div>
                                    <button class="btn btn-primary w-100 cart-btn" onclick="addToCart(this, 2)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product 3 with Discount -->
                    <div class="col-xl-4 col-md-6" data-category="headphones" data-price="8500">
                        <div class="card product-card">
                            <span class="discount-badge badge bg-danger">-20%</span>
                            <img src="../images/goods3.jpg" class="card-img-top product-image" alt="Наушники беспроводные">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Наушники беспроводные</h5>
                                <p class="card-text text-muted small">Беспроводные наушники с шумоподавлением и временем работы до 30 часов</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <span class="price-old">10 625 руб.</span>
                                            <span class="price-new d-block">8 500 руб.</span>
                                        </div>
                                        <span class="badge bg-warning text-dark">Осталось мало</span>
                                    </div>
                                    <button class="btn btn-success w-100 cart-btn" onclick="addToCart(this, 3)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product 4 -->
                    <div class="col-xl-4 col-md-6" data-category="tablet" data-price="25000">
                        <div class="card product-card">
                            <img src="../images/goods1.jpg" class="card-img-top product-image" alt="Планшет графический">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Планшет графический</h5>
                                <p class="card-text text-muted small">Графический планшет для дизайнеров с чувствительностью к нажатию 8192 уровня</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="h5 text-primary mb-0">25 000 руб.</span>
                                        <span class="badge bg-success">В наличии</span>
                                    </div>
                                    <button class="btn btn-primary w-100 cart-btn" onclick="addToCart(this, 4)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product 5 -->
                    <div class="col-xl-4 col-md-6" data-category="monitor" data-price="32000">
                        <div class="card product-card">
                            <img src="../images/goods2.jpg" class="card-img-top product-image" alt="Монитор 4K">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Монитор 4K</h5>
                                <p class="card-text text-muted small">27-дюймовый 4K монитор с IPS матрицей и частотой обновления 144 Гц</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="h5 text-primary mb-0">32 000 руб.</span>
                                        <span class="badge bg-success">В наличии</span>
                                    </div>
                                    <button class="btn btn-primary w-100 cart-btn" onclick="addToCart(this, 5)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product 6 -->
                    <div class="col-xl-4 col-md-6" data-category="keyboard" data-price="6500">
                        <div class="card product-card">
                            <img src="../images/goods3.jpg" class="card-img-top product-image" alt="Клавиатура механическая">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">Клавиатура механическая</h5>
                                <p class="card-text text-muted small">Механическая клавиатура с RGB подсветкой и переключателями Cherry MX</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="h5 text-primary mb-0">6 500 руб.</span>
                                        <span class="badge bg-success">В наличии</span>
                                    </div>
                                    <button class="btn btn-primary w-100 cart-btn" onclick="addToCart(this, 6)">
                                        <i class="bi bi-cart-plus me-2"></i>В корзину
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cart Summary -->
            <section class="mt-5">
                <div class="card shadow-sm">
                    <div class="card-header bg-light">
                        <h3 class="card-title h5 mb-0">
                            <i class="bi bi-cart-check text-primary"></i>
                            Итоговая корзина
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <p class="text-muted" id="cartEmptyMessage">Корзина пуста. Добавьте товары из каталога.</p>
                                <div id="cartItems" class="d-none">
                                    <!-- Cart items will be populated here -->
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title">Итого:</h6>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Товары:</span>
                                            <span id="cartSubtotal">0 руб.</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Доставка:</span>
                                            <span id="cartShipping">0 руб.</span>
                                        </div>
                                        <hr>
                                        <div class="d-flex justify-content-between fw-bold">
                                            <span>Всего:</span>
                                            <span id="cartTotal">0 руб.</span>
                                        </div>
                                        <button class="btn btn-success w-100 mt-3" id="checkoutBtn" disabled>
                                            <i class="bi bi-bag-check me-2"></i>Оформить заказ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-dark text-white py-4 mt-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p class="mb-0">&copy; 2025 Семестровая работа. Все права защищены.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <a href="contacts.html" class="text-white text-decoration-none me-3">Контакты</a>
                        <a href="goods_v1.html" class="text-white text-decoration-none">Старая версия</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let cart = [];
        let cartCount = 0;

        function addToCart(button, productId) {
            const productCard = button.closest('.col-xl-4');
            const productName = productCard.querySelector('.card-title').textContent;
            const productPrice = parseFloat(productCard.querySelector('.text-primary').textContent.replace(' руб.', '').replace(/\s/g, ''));
            
            // Add to cart
            cart.push({
                id: productId,
                name: productName,
                price: productPrice
            });
            
            cartCount++;
            updateCartUI();
            
            // Visual feedback
            productCard.classList.add('selected-product');
            button.innerHTML = '<i class="bi bi-check-lg me-2"></i>Добавлено';
            button.classList.remove('btn-primary');
            button.classList.add('btn-success');
            button.disabled = true;
            
            // Show toast notification
            showToast(`Товар "${productName}" добавлен в корзину!`);
        }

        function updateCartUI() {
            // Update cart count
            document.getElementById('cartCount').textContent = `Корзина: ${cartCount}`;
            
            // Update cart summary
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            const shipping = subtotal > 0 ? 500 : 0; // 500 руб. доставка
            const total = subtotal + shipping;
            
            document.getElementById('cartSubtotal').textContent = `${subtotal.toLocaleString()} руб.`;
            document.getElementById('cartShipping').textContent = `${shipping.toLocaleString()} руб.`;
            document.getElementById('cartTotal').textContent = `${total.toLocaleString()} руб.`;
            
            // Show/hide empty message
            const emptyMessage = document.getElementById('cartEmptyMessage');
            const cartItems = document.getElementById('cartItems');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            if (cartCount > 0) {
                emptyMessage.classList.add('d-none');
                cartItems.classList.remove('d-none');
                checkoutBtn.disabled = false;
                
                // Populate cart items
                cartItems.innerHTML = cart.map(item => `
                    <div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-2">
                        <span>${item.name}</span>
                        <span class="fw-bold">${item.price.toLocaleString()} руб.</span>
                    </div>
                `).join('');
            } else {
                emptyMessage.classList.remove('d-none');
                cartItems.classList.add('d-none');
                checkoutBtn.disabled = true;
            }
        }

        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'toast align-items-center text-white bg-success border-0 position-fixed bottom-0 end-0 m-3';
            toast.style.zIndex = '1055';
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Initialize and show toast
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
            
            // Remove toast after it's hidden
            toast.addEventListener('hidden.bs.toast', () => {
                document.body.removeChild(toast);
            });
        }

        // Filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            const categoryFilter = document.getElementById('categoryFilter');
            const priceFilter = document.getElementById('priceFilter');
            const products = document.querySelectorAll('#productsGrid .col-xl-4');
            
            function filterProducts() {
                const categoryValue = categoryFilter.value;
                const priceValue = priceFilter.value;
                
                products.forEach(product => {
                    const productCategory = product.dataset.category;
                    const productPrice = parseInt(product.dataset.price);
                    
                    let categoryMatch = categoryValue === 'all' || productCategory === categoryValue;
                    let priceMatch = true;
                    
                    if (priceValue !== 'all') {
                        const [min, max] = priceValue.split('-').map(val => {
                            if (val.endsWith('+')) return parseInt(val) - 1;
                            return parseInt(val);
                        });
                        
                        if (priceValue.endsWith('+')) {
                            priceMatch = productPrice > min;
                        } else {
                            priceMatch = productPrice >= min && productPrice <= max;
                        }
                    }
                    
                    if (categoryMatch && priceMatch) {
                        product.style.display = 'block';
                    } else {
                        product.style.display = 'none';
                    }
                });
            }
            
            categoryFilter.addEventListener('change', filter
